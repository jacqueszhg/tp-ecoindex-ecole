const langSelect=document.getElementById("lang-select"),tradElements=document.querySelectorAll("[data-trad]"),langs=[{name:"Fran\xe7ais",tag:"fr"},{name:"English",tag:"en"},{name:"Espanol",tag:"es"},{name:"Italiano",tag:"it"},{name:"Deutsch",tag:"de"}];let currentLang="fr";function tradPage(){traduction=fetch(`/api/${currentLang}`).then(e=>e.text()),tradElements.forEach(e=>{traduction[e].then(a=>{let n=a,t=/\$\{(a|sub|code);([^;}]*)(;([^\}]*))?\}/,l,r=10;for(;null!==(l=n.match(t))&&r>0;){switch(l[1]){case"a":n=n.replace(l[0],`<a class="facteurs__link" href="${l[4]}">${l[2]}</a>`);break;case"sub":n=n.replace(l[0],`<sub>${l[2]}</sub>`);break;default:n=n.replace(l[0],`<span class="${l[1]}">${l[2]}</span>`)}r--}e.innerHTML=n}).catch(()=>{e.innerText=""})})}langSelect.addEventListener("change",function(){currentLang=this.value,tradPage()}),langs.forEach(e=>{let a=langSelect.appendChild(document.createElement("option"));a.value=e.tag,a.innerText=e.name}),tradPage();const spawnList=Array.from(document.querySelectorAll("[data-spawn]")),intervalId=setInterval(()=>{let e=spawnList.pop();e.removeAttribute("data-spawn"),0===spawnList.length&&clearInterval(intervalId)},150),augmentDom=document.getElementById("augment-dom"),keywords=["ecoindex","\xe9coconception","\xe9mission de CO2","eau","mesure d'impact","environnement","num\xe9rique responsable","normes","ademe","analyse de cycle de vie","acv","avenir","eco conception","\xe9conomie circulaire","\xe9valuation","indicateurs"],DOM_SIZE_GOAL=1e4,DOM_LOOP_REQUIRED=1e4/keywords.length;for(let i=0;i<DOM_LOOP_REQUIRED;i++){let e=augmentDom.appendChild(document.createElement("div"));keywords.forEach(a=>{let n=e.appendChild(document.createElement("span"));n.innerText=a,n.classList.add("augment__span")})}